<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/styles/normalize.css" type="text/css" />
    <link rel="stylesheet" href="/styles/output.css" type="text/css" />
    <!-- External JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>Register</title>
  </head>

  <body class="bg-ash">
    <section
      class="grid gap-x-4 grid-rows-none grid-cols-4 md:grid-cols-8 lg:grid-cols-12 wrapper mx-auto pt-10"
    >
      <h1
        class="text-white text-4xl font-display font-bold text-center md:col-span-8 md:col-start-2 lg:col-span-12 text-center mb-3"
      >
        Current Active Orders
      </h1>

      <div
        class="mx-4 gap-x-4 grid-rows-none grid-cols-4 md:grid-cols-8 lg:grid-cols-12 col-span-4 md:col-span-8 lg:col-span-12"
      >
        <% for(let order in orders) { %>
     
        <% } %>
      </div>
    </section>
    <script src="/scripts/nav.js"></script>

    <script>

         const orderItems = <%-JSON.stringify(orderItems)%>

         const createItemInOrder = (cartItem) => {
           const itemInOrderTemplate= `
           <article class="cart-item flex flex-wrap justify-between px-4 py-4  w-auto">
                 <div class="flex items-center flex-wrap">
                   <p class="item-qty font-body text-coffee-brown mr-2 inline-block">
                     ${cartItem.order_items_qty}
                   </p>
                   <p class="font-body text-ash text-xl inline-block">
                    ${cartItem.name}

                   </p>
                 </div>


                 <ul class="selected-options block list-disc w-48 ml-10 w-full">

                   <li class="text-light-grey text-sm">large</li>
                 </ul>
               </article>
      `
      return itemInOrderTemplate;
         }

         const activeOrders = document.getElementsByClassName('active-order');

         const checkoutUI = document.getElementById("cart-items-container");


         Array.from(activeOrders).forEach((order) => {
            const orderToItemToCreate = order.getAttribute('order-id');
            for(let i = 0; i < orderItems.length; i++ ){
              console.log(orderToItemToCreate )
              if(orderItems[i].orders_id == orderToItemToCreate){
                console.log( createItemInOrder(orderItems[i]))
                order.insertAdjacentHTML("beforeend", createItemInOrder(orderItems[i]));
              }

            }
            });

         console.log(activeOrders)
    </script>
  </body>
</html>
